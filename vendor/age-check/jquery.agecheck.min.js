(function(a){a.ageCheck=function(b){const c=a.extend({minAge:18,redirectTo:'',redirectOnFail:'https://www.bzga.de/',title:'ALTERS-CHECK',copy:'Um Millet\'s veganen Sahnelik\xF6r sehen zu k\xF6nnen, musst du \xFCber 18 sein und das gesetzlich vorgeschriebene Mindestalter f\xFCr den Kauf von Alkohol erf\xFCllen. Bitte trink verantwortungsbewusst.'},b),d={month:'',day:'',year:'',age:'',errors:[],setValues(){const b=a('.ac-container .month').val(),c=a('.ac-container .day').val();d.month=b,d.day=c.replace(/^0+/,''),d.year=a('.ac-container .year').val()},validate(){return d.errors=[],!1===/^([0-9]|[12]\d|3[0-1])$/.test(d.day)&&d.errors.push('Tag ist nicht richtig oder leer.'),!1===/^(19|20)\d{2}$/.test(d.year)&&d.errors.push('Das Jahr ist falsch oder leer.'),d.clearErrors(),d.displayErrors(),1>d.errors.length},clearErrors(){a('.errors').html('')},displayErrors(){let b='<ul>';for(let a=0;a<d.errors.length;a++)b+=`<li><span>x</span>${d.errors[a]}</li>`;b+='</ul>',setTimeout(()=>{a('.ac-container .errors').html(b)},200)},reCenter(c){var b=Math.max;c.css('top',`${b(0,(a(window).height()-(c.outerHeight()+150))/2)}px`),c.css('left',`${b(0,(a(window).width()-c.outerWidth())/2)}px`)},buildHtml(){const b=c.copy,e=['Januar','Februar','M&auml;rz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'];let f='';f+='<div class="ac-overlay"></div>',f+='<div class="ac-container">',f+=`<h2>${c.title}</h2>`,f+=`<p>${b.replace('[21]',`<strong>${c.minAge}</strong>`)}`,+'</p>',f+='<div class="errors"></div>',f+='<div class="fields">',f+='<input class="day" maxlength="2" placeholder="00" /><select class="month">';for(let a=0;a<e.length;a++)f+=`<option value="${a}">${e[a]}</option>`;f+='</select>',f+='<input class="year" maxlength="4" placeholder="0000"/>',f+='<button>Check</button></div></div>',a('body').append(f),a('.ac-overlay').animate({opacity:1},500,()=>{d.reCenter(a('.ac-container')),a('.ac-container').css({opacity:1})}),a('.ac-container .day, .ac-container .year').focus(function(){a(this).removeAttr('placeholder')})},setAge(){d.age='';const a=new Date(d.year,d.month,d.day),b=Date.now()-a.getTime(),c=new Date(b);d.age=Math.abs(c.getUTCFullYear()-1970)},setSessionStorage(a,b){try{return sessionStorage.setItem(a,b),!0}catch(a){return!1}},handleSuccess(){a('.ac-container').html('<h3>Erfolg!</h3><p>Du wirst jetzt weitergeleitet.</p>'),setTimeout(()=>{a('.ac-container').animate({top:'-350px'},200,()=>{a('.ac-overlay').animate({opacity:'0'},500,()=>{''===c.redirectTo?a('.ac-overlay, .ac-container').remove():window.location.replace(c.redirectTo)})})},2e3)},handleUnderAge(){a('.ac-container').html('<h3>Entschuldige, aber du bist nicht alt genug um diese Seite anzuzeigen.</h3>'),''!==c.redirectOnFail&&setTimeout(()=>{window.location.replace(c.redirectOnFail)},2e3)}};return'true'!==sessionStorage.getItem('ageVerified')&&void(d.buildHtml(),a('.ac-container button').on('click',()=>{d.setValues(),!0===d.validate()&&(d.setAge(),d.age>=c.minAge?(!d.setSessionStorage('ageVerified','true')&&console.log('sessionStorage not supported by your browser'),d.handleSuccess()):d.handleUnderAge())}),a(window).resize(()=>{d.reCenter(a('.ac-container')),setTimeout(()=>{d.reCenter(a('.ac-container'))},500)}))}})(jQuery);